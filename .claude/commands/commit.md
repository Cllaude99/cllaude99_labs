# Smart Commit Command

개발 후 변경된 파일들을 분석하고, 기능 단위로 커밋을 분리하여 실행하는 명령어입니다.

## 사용법

```
/commit
```

## 동작 과정 (2단계)

### Phase 1 - 계획 수립

1. **변경사항 분석**: `git status`와 `git diff`로 수정된 파일들과 변경 내용을 분석합니다.
2. **기능별 그룹핑**: 변경된 파일들을 도메인/기능 단위로 커밋 그룹으로 분류합니다.
3. **커밋 계획표 출력**: 각 커밋의 타입, 제목, 포함 파일, 변경 요약을 정리한 계획표를 사용자에게 보여줍니다.
4. **사용자 승인 대기**: 계획표에 대해 사용자의 확인을 받습니다. 사용자가 수정을 요청하면 계획을 조정합니다.

### Phase 2 - 커밋 실행

5. **순차 커밋 실행**: 승인된 계획에 따라 각 커밋 그룹별로 `git add` → `git commit`을 순서대로 실행합니다.
6. **결과 확인**: 모든 커밋 완료 후 `git log`로 결과를 요약합니다.

## 기능별 커밋 분리 기준

변경된 파일들을 아래 기준에 따라 커밋 그룹으로 분류합니다.

### 그룹핑 기준

- **같은 컴포넌트**: 하나의 컴포넌트를 구성하는 파일들 (예: `index.tsx` + `.styles.ts`)
- **같은 도메인**: 동일 도메인/기능 영역에 속하는 파일들 (예: `user/` 하위 파일들)
- **같은 설정 영역**: 설정 파일들끼리 묶기 (예: `package.json` + `tsconfig.json` + `pnpm-lock.yaml`)
- **같은 목적의 변경**: 하나의 버그 수정이나 리팩토링에 관련된 파일들

### 합치기 판단

- 변경이 적고 기능이 동일한 파일들은 하나의 커밋으로 합칩니다.
- 전체 변경사항이 하나의 기능에 대한 것이라면 하나의 커밋으로 처리합니다.
- 무리하게 분리하지 않습니다. 자연스러운 단위로 나눕니다.

## 커밋 계획표 출력 형식

커밋 실행 전 반드시 아래 형식의 계획표를 사용자에게 보여주고 승인을 받습니다.

```
## 커밋 계획

### 커밋 1: feat: 사용자 프로필 컴포넌트 추가
- src/components/UserProfile/index.tsx
- src/components/UserProfile/UserProfile.styles.ts
변경 요약: 사용자 프로필 카드 컴포넌트를 새로 생성했습니다

### 커밋 2: fix: 로그인 토큰 갱신 오류 수정
- src/hooks/useAuth.ts
변경 요약: 토큰 만료 시 갱신 로직에서 발생하던 무한 루프를 수정했습니다

계속 진행할까요?
```

## 커밋 메시지 형식

```
<타입>: <한국어 제목>

- <서술형 변경사항 1>
- <서술형 변경사항 2>
- <서술형 변경사항 3>

```

### 커밋 메시지 규칙

- **제목**: 괄호 사용 금지. 한국어로 간결하게 작성합니다.
  - 좋은 예: `feat: 사용자 프로필 컴포넌트 추가`
  - 나쁜 예: `feat: 사용자 프로필 컴포넌트 추가 (UserProfile)`
  - 나쁜 예: `feat(user): 프로필 컴포넌트 추가`
- **본문**: 각 항목은 반드시 **"~했습니다"** 체의 서술형으로 종결합니다.
  - 좋은 예: `- 프로필 카드 컴포넌트를 추가했습니다`
  - 좋은 예: `- 토큰 갱신 시 무한 루프 문제를 수정했습니다`
  - 나쁜 예: `- 프로필 카드 컴포넌트 추가` (명사형 종결 금지)
  - 나쁜 예: `- 토큰 갱신 로직 수정함` (축약형 종결 금지)
- **언어**: 제목과 본문 모두 한국어로 작성합니다.

## 커밋 타입 분류

- `feat`: 기능 개발 (새로운 기능)
- `fix`: 버그 (버그 수정)
- `refactor`: 리팩토링 작업
- `design`: UI 수정 작업
- `docs`: 문서 (문서 추가, 수정, 삭제, 이동 등)
- `test`: 테스트 (테스트 코드 추가, 수정, 삭제 등)
- `chore`: 설정 관련 변경사항 (빌드 스크립트 수정, package.json 등) 또는 잡일

## 자동 분석 기준

- **파일 확장자**: `.md`, `README` → `docs`
- **파일 경로**: `test/`, `spec/`, `__tests__/` → `test`
- **설정 파일**: `package.json`, `tsconfig.json`, `.eslintrc` → `chore`
- **스타일 파일**: `.css`, `.styles.ts`, UI 컴포넌트 → `design`
- **신규 파일**: 새로 추가된 기능 파일 → `feat`
- **기존 파일 수정**: 버그 수정 또는 리팩토링으로 분류

## 주의사항

- 변경사항이 없으면 커밋하지 않습니다
- 민감한 정보가 포함된 파일은 경고를 표시합니다
- Phase 1에서 계획표를 보여주고 반드시 사용자 승인을 받은 후에 Phase 2를 진행합니다
- 사용자가 계획을 수정 요청하면 계획을 조정한 후 다시 승인을 받습니다
