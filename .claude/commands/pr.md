# Smart PR Message Generator

`/commit` 이후에 실행하여 Pull Request 메시지를 자동 생성하는 명령어입니다.

## 사용법
```
/pr
```

## /commit 컨텍스트 연동

`/pr`은 `/commit` 명령어 이후에 실행하는 것을 전제로 합니다.

- **`/commit` 이후 실행 (권장)**: 현재 세션에서 `/commit`으로 생성한 커밋 내역(커밋 계획표, 변경 요약 등)을 기반으로 PR 메시지를 작성합니다. 이미 분석된 변경사항 컨텍스트를 활용하므로 더 정확한 PR 메시지가 생성됩니다.
- **단독 실행 (폴백)**: `/commit` 컨텍스트가 없는 경우 `git log`에서 base 브랜치(main/master) 이후 커밋들을 분석하여 PR 메시지를 작성합니다.

## 동작 과정

1. **컨텍스트 확인**: 현재 세션에서 `/commit`으로 생성한 커밋 정보가 있는지 확인합니다
2. **폴백 분석**: `/commit` 컨텍스트가 없으면 `git log`로 base 브랜치 이후 커밋들을 분석합니다
3. **브랜치 정보 확인**: 현재 브랜치와 base 브랜치를 확인합니다
4. **커밋별 작업 내용 작성**: 각 커밋의 변경사항을 🚨/🛠️/🎯 구조로 서술형 작성합니다
5. **중복/불필요 표현 정리**: 커밋 간 겹치는 맥락이나 불필요한 수식어를 제거합니다
6. **PR 메시지 생성**: PULL_REQUEST_TEMPLATE.md 형식에 맞춘 완전한 PR 메시지를 작성합니다
7. **결과 제공**: 생성된 PR 메시지를 마크다운 코드 블록으로 감싸서 복사 가능한 형태로 제공합니다

## 생성되는 내용

기존 `.github/PULL_REQUEST_TEMPLATE.md` 템플릿을 완벽하게 채워서 제공합니다:

### 자동 완성 섹션
- **개요**: 커밋 메시지와 변경 파일 기반으로 작성
- **PR 유형**: 커밋 타입에 따라 해당 체크박스 자동 선택
- **작업 내용**: 커밋 단위로 분리하여 문제상황/해결과정/결과 구조로 정리

### 수동 작성 안내
- **스크린샷**: 필요시 추가 가이드 제공
- **공유사항**: 리뷰 포인트 작성 가이드
- **체크리스트**: 기본 체크리스트 제공

## 커밋별 작업 내용 구조화

커밋 개수에 따라 `## 작업 내용` 섹션의 구조가 달라집니다.

### 커밋이 1개인 경우

기존과 동일하게 하나의 🚨/🛠️/🎯 블록으로 작성합니다.

```markdown
## 작업 내용

### 🚨 [문제 상황]
사용자 정보를 표시할 전용 컴포넌트가 없어 여러 페이지에서 인라인으로 사용자 정보를 렌더링하고 있었습니다.

### 🛠️ [문제 해결 과정]
UserProfile 컴포넌트를 생성하고, 프로필 이미지와 기본 정보를 카드 형태로 표시하도록 구현했습니다.

### 🎯 [결과]
재사용 가능한 UserProfile 컴포넌트가 추가되어 사용자 정보 표시의 일관성이 확보되었습니다.
```

### 커밋이 여러 개인 경우

각 커밋별로 소제목과 🚨/🛠️/🎯 블록을 반복합니다.

```markdown
## 작업 내용

### 1. feat: 사용자 프로필 컴포넌트 추가

#### 🚨 [문제 상황]
사용자 정보를 표시할 전용 컴포넌트가 없어 여러 페이지에서 인라인으로 사용자 정보를 렌더링하고 있었습니다.

#### 🛠️ [문제 해결 과정]
UserProfile 컴포넌트를 생성하고, 프로필 이미지와 기본 정보를 카드 형태로 표시하도록 구현했습니다. 기존 디자인 시스템의 Card 컴포넌트를 기반으로 일관된 스타일을 적용했습니다.

#### 🎯 [결과]
재사용 가능한 UserProfile 컴포넌트가 추가되어 사용자 정보 표시의 일관성이 확보되었습니다.

### 2. fix: 로그인 토큰 갱신 오류 수정

#### 🚨 [문제 상황]
토큰 만료 시 갱신 요청이 무한 반복되는 문제가 발생하고 있었습니다.

#### 🛠️ [문제 해결 과정]
인터셉터에서 갱신 요청 중복 방지 플래그를 추가하고, 갱신 실패 시 로그아웃 처리를 명확히 분리했습니다.

#### 🎯 [결과]
토큰 만료 시 정상적으로 한 번만 갱신을 시도하며, 실패 시 안전하게 로그아웃 처리됩니다.
```

## 작성 스타일 규칙

PR 메시지 작성 시 반드시 다음 규칙을 따릅니다:

- **서술형 문장**: "~했습니다", "~되었습니다" 체로 작성합니다. 명사형이나 축약형을 사용하지 않습니다.
  - ❌ "토큰 갱신 로직 수정" → ✅ "토큰 갱신 로직을 수정했습니다"
  - ❌ "컴포넌트 분리 및 최적화" → ✅ "컴포넌트를 분리하고 최적화했습니다"
- **중복 제거**: 여러 커밋 간 겹치는 표현이나 맥락은 통합하여 제거합니다.
- **읽기 쉬운 한국어**: 자연스럽게 읽히는 문장으로 작성하며, 기술 용어만 영어를 허용합니다.
- **불필요한 표현 제거**: "~를 진행했습니다", "~에 대해서", "~하는 부분을" 등 불필요한 수식어를 최소화합니다.
  - ❌ "리팩토링을 진행했습니다" → ✅ "리팩토링했습니다"
  - ❌ "에러 처리에 대해서 개선했습니다" → ✅ "에러 처리를 개선했습니다"

## 커밋 타입별 PR 유형 매핑

- `feat` → "새로운 기능 추가"
- `fix` → "버그 수정"
- `design` → "CSS 등 사용자 UI 디자인 변경"
- `refactor` → "코드 리팩토링"
- `docs` → "문서 수정"
- `test` → "테스트 추가, 테스트 리팩토링"
- `chore` → "빌드 부분 혹은 패키지 매니저 수정"

## 실행 단계

1. `/commit` 컨텍스트 확인 (현재 세션에서 생성한 커밋 계획표/변경 요약)
2. 컨텍스트가 없으면 `git log`로 base 브랜치 이후 커밋 정보 수집 (`git log main..HEAD --oneline`, `git diff main...HEAD --stat`)
3. 변경된 파일 목록과 변경 내용 분석
4. 커밋 메시지에서 PR 제목과 설명 추출
5. 커밋 타입에 따른 PR 유형 체크박스 설정
6. 커밋별 🚨/🛠️/🎯 구조로 작업 내용 서술형 작성
7. 중복 표현 정리 및 불필요한 수식어 제거
8. 완전한 PR 메시지 생성 및 마크다운 코드 블록으로 제공
9. 선택적으로 GitHub PR 생성 지원

## GitHub 연동 옵션

### 옵션 1: 메시지만 생성 (기본)
생성된 PR 메시지를 텍스트로 제공하여 GitHub 웹에서 직접 사용

### 옵션 2: GitHub CLI 연동 (선택사항)
`gh` 명령어가 설치된 경우 자동으로 PR 생성까지 실행

```bash
# GitHub CLI 설치 (선택사항)
brew install gh

# 인증 (선택사항)
gh auth login
```

## 생성 예시

### 커밋 1개인 경우

```markdown
## 개요

HintPhase 미니게임 기능 추가 및 플로우 통합

밈 퀴즈 게임의 힌트 단계에서 사용자 참여를 높이기 위한 미니게임 기능을 추가했습니다.

## PR 유형

어떤 변경 사항이 있나요?

- [x] 새로운 기능 추가

## 작업 내용

### 🚨 [문제 상황]
힌트 단계에서 단순 텍스트 힌트만 제공하고 있어 사용자 참여도가 낮았습니다.

### 🛠️ [문제 해결 과정]
HintPhase 컴포넌트에 미니게임 로직을 추가하고, 기존 퀴즈 플로우와 자연스럽게 연결되도록 상태 관리를 통합했습니다.

### 🎯 [결과]
힌트 단계에서 미니게임을 통해 힌트를 획득하는 인터랙티브한 경험이 제공됩니다.

## 스크린샷

<!-- UI 변경사항이 있다면 스크린샷을 첨부해주세요 -->

## 공유사항 to 리뷰어

- 미니게임 플로우가 기존 퀴즈 플로우와 자연스럽게 연결되는지 확인 부탁드립니다

## PR Checklist

PR이 다음 요구 사항을 충족하는지 확인하세요.

- [x] 커밋 메시지 컨벤션에 맞게 작성했습니다.
- [x] 변경 사항에 대한 테스트를 했습니다.
```

### 커밋 여러 개인 경우

```markdown
## 개요

TradersPage 다크모드 테마 적용 및 스타일 구조 개선

TradersPage 전체에 다크모드 테마 스타일을 적용하고, 미사용 코드를 정리했습니다.

## PR 유형

어떤 변경 사항이 있나요?

- [x] CSS 등 사용자 UI 디자인 변경

## 작업 내용

### 1. design: TradersPage 전체 다크모드 테마 스타일 적용

#### 🚨 [문제 상황]
TradersPage가 라이트 모드 고정 스타일로 되어 있어 다크모드 전환 시 가독성 문제가 발생했습니다.

#### 🛠️ [문제 해결 과정]
테마 시스템의 palette 값을 활용하여 모든 색상을 동적으로 변경되도록 수정하고, 미사용 코드를 정리했습니다.

#### 🎯 [결과]
다크모드와 라이트모드 전환 시 TradersPage의 모든 요소가 테마에 맞게 표시됩니다.

### 2. style: TradersPage 스타일을 새 테마 구조에 맞게 정렬

#### 🚨 [문제 상황]
일부 스타일이 기존 하드코딩된 색상값을 사용하고 있어 테마 시스템과 불일치가 있었습니다.

#### 🛠️ [문제 해결 과정]
하드코딩된 색상값을 테마 변수로 교체하고, 스타일 파일의 구조를 새 테마 시스템에 맞게 재정리했습니다.

#### 🎯 [결과]
모든 스타일이 테마 시스템을 통해 일관되게 관리됩니다.

## 스크린샷

<!-- UI 변경사항이 있다면 스크린샷을 첨부해주세요 -->

## 공유사항 to 리뷰어

- 다크모드/라이트모드 전환 시 모든 요소가 정상적으로 표시되는지 확인 부탁드립니다

## PR Checklist

PR이 다음 요구 사항을 충족하는지 확인하세요.

- [x] 커밋 메시지 컨벤션에 맞게 작성했습니다.
- [x] 변경 사항에 대한 테스트를 했습니다.
```

## 사용 이점

- **컨텍스트 활용**: `/commit`에서 분석한 변경사항을 재활용하여 정확한 PR 메시지 생성
- **커밋별 구조화**: 여러 커밋의 작업 내용을 각각 명확히 분리하여 리뷰어 이해도 향상
- **일관성**: 항상 템플릿 형식에 맞는 완전한 PR 메시지
- **서술형 한국어**: 자연스럽고 읽기 쉬운 문장으로 작성
- **유연성**: GitHub CLI 없이도 사용 가능, 웹에서 복사-붙여넣기만으로 완료
